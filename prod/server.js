"use strict";const e=require("path"),r=require("express"),s=require("helmet"),o=require("body-parser"),i=require("cors"),n=require("morgan"),t=require(e.join(__dirname,"core","Logger.js")),u=require("fs"),a=r(),c=8080;if(a.use(s()),a.use(o.json()),a.use(o.urlencoded({extended:!0})),a.use(i()),a.use(r.static(e.join(__dirname,"webapp"))),"production"===process.env.NODE_ENV){const r=require("file-stream-rotator");let s=e.join(__dirname,"logs");u.existsSync(s)||u.mkdirSync(s);let o=r.getStream({date_format:"YYYY-MM-DD",filename:e.join(s,"access-%DATE%.log"),frequency:"daily",verbose:!1});a.use(n("combined",{stream:o}))}else a.use(n("combined"));a.get("/",(e,r)=>{r.status(200).send("May the force be with you.")});let d=require(e.join(__dirname,"bundles","example","exampleRouter.js"));a.use("/example",d);let m=a.listen(c,()=>{t.info("Server run on port",c,"in",process.env.NODE_ENV,"mode")});module.exports=m;